<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transaction Completed - Algorand-NEAR Bridge</title>
    <!-- <link rel="stylesheet" href="./index.css" /> -->
    <link rel="stylesheet" href="/frontend/index.css" />
    <style>
      table,
      th,
      td {
        border: 1px solid white;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 5px;
        text-align: left;
      }
      th {
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div style="display: grid; place-items: center; height: 80%">
      <h1>Transaction Completed.</h1>
      <p>This is the last step of this demo. Go back to <a href="/">home</a></p>
      <table>
        <tr>
          <th>txnType</th>
          <td id="txnType"></td>
        </tr>
        <tr>
          <th>fromAddr</th>
          <td id="fromAddr"></td>
        </tr>
        <tr>
          <th>fromAmountAtom</th>
          <td id="fromAmountAtom"></td>
        </tr>
        <tr>
          <th>fromTxnId</th>
          <td id="fromTxnId"></td>
        </tr>
        <tr>
          <th>toAddr</th>
          <td id="toAddr"></td>
        </tr>
        <tr>
          <th>toAmountAtom</th>
          <td id="toAmountAtom"></td>
        </tr>
        <tr>
          <th>toTxnId</th>
          <td id="toTxnId"></td>
        </tr>
        <tr>
          <th>dbId</th>
          <td id="dbId"></td>
        </tr>
        <tr>
          <th>fixedFeeAtom</th>
          <td id="fixedFeeAtom"></td>
        </tr>
        <tr>
          <th>marginFeeAtom</th>
          <td id="marginFeeAtom"></td>
        </tr>
        <tr>
          <th>createdTime</th>
          <td id="createdTime"></td>
        </tr>
      </table>
    </div>
  </body>
  <script src="/frontend/html-nodes.js"></script>
  <script>
    let bridgeTxn = JSON.parse('<%- bridgeTxnStr %>');
    document.querySelector('#dbId').textContent = bridgeTxn.dbId;
    document.querySelector('#fixedFeeAtom').textContent =
      bridgeTxn.fixedFeeAtom;
    document.querySelector('#marginFeeAtom').textContent =
      bridgeTxn.marginFeeAtom;
    document.querySelector('#createdTime').textContent = bridgeTxn.createdTime;
    document.querySelector('#fromAmountAtom').textContent =
      bridgeTxn.fromAmountAtom;
    document.querySelector('#toAmountAtom').textContent =
      bridgeTxn.toAmountAtom;
    document.querySelector('#txnType').textContent = bridgeTxn.txnType;

    if (bridgeTxn.txnType === 'MINT') {
      document
        .querySelector('#fromAddr')
        .appendChild(nearAccNode(bridgeTxn.fromAddr));
      document
        .querySelector('#fromTxnId')
        .appendChild(nearTxnIdNode(bridgeTxn.fromTxnId));
      document
        .querySelector('#toAddr')
        .appendChild(algoAccNode(bridgeTxn.toAddr));
      document
        .querySelector('#toTxnId')
        .appendChild(algoTxnIdNode(bridgeTxn.toTxnId));
    } else if (bridgeTxn.txnType === 'BURN') {
      document
        .querySelector('#fromAddr')
        .appendChild(algoAccNode(bridgeTxn.fromAddr));
      document
        .querySelector('#fromTxnId')
        .appendChild(algoTxnIdNode(bridgeTxn.fromTxnId));
      document
        .querySelector('#toAddr')
        .appendChild(nearAccNode(bridgeTxn.toAddr));
      document
        .querySelector('#toTxnId')
        .appendChild(nearTxnIdNode(bridgeTxn.toTxnId));
    } else {
      alert('Unknown transaction type');
    }
  </script>
</html>
